#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import NoTransition kivy.uix.screenmanager.NoTransition
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import CardTransition kivy.uix.screenmanager.CardTransition
#:import SwapTransition kivy.uix.screenmanager.SwapTransition
#:import WipeTransition kivy.uix.screenmanager.WipeTransition
#:import FallOutTransition kivy.uix.screenmanager.FallOutTransition
#:import RiseInTransition kivy.uix.screenmanager.RiseInTransition
#:import CheckBox kivy.uix.checkbox

<PantallaScreen>:
    name: 'PantallaScreen'
    id: PantallaScreen
    BoxLayout:
        id: PantallaLayout
        orientation: 'vertical'
        rows: 2
        color: 1,1,1,1
        BoxLayout:
            orientation: 'horizontal'
            id: upperBar
            space: 40
            size_hint: 1, .05
            Button:
                id: menuButton
                text: "1"
                size_hint: .07, 1
                on_press: root.mostrar_menu()
            Label:
                id: textoPantalla
                text: "Pantalla x"
                font_color: 0,1,0,1
                size_hint: .15, 1
            BoxLayout:
                
            Button:
                id: srchButton
                text: "Srch"
                size_hint: .07, 1

        
        Sm:
            id: Screens

   
<LoginScreen>:
    id: LoginScreen
    name: 'LoginScreen'
    #canvas:
        #Color:
            #rgb: .2, .3,  .9
        #Rectangle:
            #pos: self.pos
            #size: self.size
    BoxLayout:
        orientation: 'vertical'
        space: 20
        size_hint: .4, .4
        pos_hint: {'center_x': .5, 'center_y': .5}
        Label:
            id:LoginLabel
            text: "Login"
            size_hint: 1, .1
        TextInput:
            id: inputCorreoL
            hint_text: "Correo"
            size_hint: 1, .2
        TextInput:
            id: inputContrasenaL
            password:True
            hint_text: "Contraseña"
            size_hint: 1, .2
        Button:
            text: "Ingresar"
            size_hint: 1, .2
            on_press: root.validar_login()
        Label:
            id: loginIncorrectoLabel
            text:""
            size_hint: 1, .2
        BoxLayout:
            size_hint: 1, .1
            orientation: 'horizontal'
            Label:
                text: "No tienes cuenta?"
            Button:
                id: linkRegistro
                text: "Registrate!"
                on_press:  root.manager.current='RegisterScreen'

<RegisterScreen>:
    id: ScreenLayout
    name: 'RegisterScreen'
    BoxLayout: 
        id: ScreenLayout
        orientation: 'vertical'
        space: 20
        size_hint: .4, .4
        pos_hint: {'center_x': .5, 'center_y': .5}
        Label:
            id: RegisterLabel
            text: "Registro"
            size_hint: 1, .1
        TextInput:
            id: inputCorreo
            hint_text: "Correo"
            size_hint: 1, .2
        TextInput:
            id: inputContrasena
            hint_text: "Contraseña"
            size_hint: 1, .2
        Button:
            id: ButtonRegistrarse
            text: "Registrarse"
            size_hint: 1, .2
            on_press: root.registrar()
            on_press: root.manager.current='LoginScreen'
        GridLayout:
            size_hint: 1, .2
        BoxLayout:
            size_hint: 1, .1
            orientation: 'horizontal'
            Label:
                text: "Ya tienes una cuenta?"
            Button:
                id: linkLogin
                text: "Ingresa!"
                on_press: root.manager.current='LoginScreen'

<MenuPop>:
    id: MenuPopup
    title: ""
    separator_height: 0
    size_hint: .2, 1
    pos_hint: {'x': 0, 'top': 1}
    pos: 0, 500
    BoxLayout:
        orientation: 'vertical'
        space: 10
        Button:
            id: ButtonExperimentos
            text:"Experimentos"
            size_hint: 1, .07
            on_press: root.pasar_a_experimentos()
        Button:
            id: ButtonPersonas
            text:"Personas"
            size_hint: 1, .07
            on_press: root.pasar_a_personas()
        Button:
            id: ButtonAromas
            text: "Aromas"
            size_hint: 1, .07
            on_press: root.pasar_a_aromas()
        BoxLayout:

        Button:
            id: ButtonSalir
            text: "Salir"
            size_hint: 1, .07
            on_press: root.salir()


<Brain>:
    name: 'Brain'
    Button:
        background_normal: "Brain1.jpg"
        text: "Pantalla del gif"
        on_press: root.manager.current='Experimentos'

<Experimentos>:
    name: 'Experimentos'
    BoxLayout:
        orientation: 'vertical'
        space: 10
        size_hint: .4, .05
        pos_hint: {'center_x': .5, 'center_y': 0.94}
        Button:
            text: "Crear experimento "
            on_press: root.crear_exp()

<ExperimentoPop>:
    id: ExperimentoPopup
    title: "Crear experimento"
    title_align: 'center'
    separator_height: 0.9
    size_hint: .6, 0.5
    pos_hint: {'x': 0.2, 'top': 0.75}
    pos: 0, 500
    BoxLayout:
        orientation: 'vertical'
        space: 10
        TextInput:
            id: inputEmpresaL
            hint_text: "Nombre empresa"
            size_hint: 1, .30
        TextInput:
            id: inputNombreL
            hint_text: "Nombre experimento"
            size_hint: 1, .30
        BoxLayout:
            orientation:"horizontal"
            size_hint: 1, .30
            Spinner:
                id: spinnerId
                text: "Seleccionar personas"
                values: ["Persona1", "Persona2", "Persona3", "Persona4", "Persona5"]
                on_text: root.listPer(spinnerId.text)
        BoxLayout:
            orientation:"horizontal"
            size_hint: 1, .30
            Spinner:
                text: "Seleccionar aroma"
                values: ["Aroma1", "Aroma2"]
                id: spinnerIdar
                on_text: root.listAr(spinnerIdar.text)
        BoxLayout:
            orientation: "horizontal"
            Button:
                id: ButtonCrear
                text: "Crear"
                size_hint: 1, .30
                on_press: root.registrarExp(), root.confirmar_exp()
            Button:
                id: ButtonSalirCrear
                text: "Salir"
                size_hint: 1, .30
                on_press: root.dismiss()
            Button:
                id: ButtonVerResultados
                text: "Resultados"
                size_hint: 1, .30
                on_press: root.verResultadosExp()

<confirmarExpPop>:
    id: confirmarExpPopup
    title: ""
    title_align: 'center'
    separator_height: 0
    size_hint: .4, 0.3
    pos_hint: {'x': 0.4, 'top': 0.55}
    pos: 0, 500
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: "Experiemento creado"
        BoxLayout:
            orientation: "horizontal"
            Button:
                id: ButtonSalirCrear
                text: "Salir"
                size_hint: 1, .22
                on_press: root.dismiss()


<Personas>:
    name: 'Personas'
    BoxLayout:
        orientation: 'horizontal'
        space: 10
        size_hint: .4, .05
        pos_hint: {'center_x': .5, 'center_y': 0.94}
        Button:
            text: "Crear persona"
            on_press: root.crearPer()
        Button:
            text: "Ver lista de personas"
            on_press: root.verListaPer()

<personasPopUp>:
    id: personasPopUp
    title: "Crear personas"
    title_align: 'center'
    separator_height: 0.9
    size_hint: .6, 0.5
    pos_hint: {'x': 0.2, 'top': 0.75}
    pos: 0, 500
    BoxLayout:
        orientation: 'vertical'
        space: 10
        TextInput:
            id: inputIdP
            hint_text: "Id"
            size_hint: 1, .30
        TextInput:
            id: inputNombreP
            hint_text: "Nombre persona"
            size_hint: 1, .30
        TextInput:
            id: inputEdadP
            hint_text: "Edad"
            size_hint: 1, .30
        TextInput:
            id: inputGeneroP
            hint_text: "Genero"
            size_hint: 1, .30
        BoxLayout:
            orientation: "horizontal"
            Button:
                id: ButtonCrear
                text: "Crear"
                size_hint: 1, .30
                on_press: root.crearPer(), root.confirmarPersona()
            Button:
                id: ButtonSalirCrear
                text: "Salir"
                size_hint: 1, .30
                on_press: root.dismiss()


<confirmarPerPop>:
    id: confirmarPerPopup
    title: ""
    title_align: 'center'
    separator_height: 0
    size_hint: .4, 0.3
    pos_hint: {'x': 0.3, 'top': 0.65}
    pos: 0, 500
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: "Persona registrada"
        BoxLayout:
            orientation: "horizontal"
            Button:
                id: ButtonSalirCrear
                text: "Salir"
                size_hint: 1, .22
                on_press: root.dismiss()


<Aromas>:

    name:'Aromas'
    Button:
        text: "Pantalla de aromas"
        on_press: root.manager.current='Brain'
<Ssm>:
    id: Sscreens
    transition: FallOutTransition()
    LoginScreen:
    RegisterScreen:
    PantallaScreen:
<Sm>:
    id: Screens
    transition: SlideTransition()
    Brain:
    Experimentos:
    Personas:
    Aromas: